<!DOCTYPE html>
<html>
<head>
	<title>Internationalization</title>
	<meta charset="utf-8">
	<link href="./manual.css" rel="stylesheet" type="text/css">
	<style>
		inline-code {
			background-color: #eee;
			font-family: monospace;
			padding: 3px 4px;
			display: inline-block;
			margin: 1px 0px;
		}
	</style>
	<base target="_blank">
</head>
<body>
	<a href="#" class="scroll_back_button" target="_self">&uArr;</a>

	<div id="container">
		<header class="logo-header">
			<img class="header-logo" alt="Logo" src="puppylogo96.png">
			<h1>HOWTO internationalize applications</h1>
		</header>
		<p style="text-align: right;">
			<small>Page Updated: <i>Jan 14, 2023</i></small>
		</p>
		<p>
			Internationalization of applications and scripts in Puppy Linux has become extremely easy, with <b>MoManager</b>, a GUI application.
		</p>
		<p>
			If you are writing software for Puppy and want that your application be internationalized, or if you want to create translations of Puppy in your language, please read this help page.
		</p>
		<section>
			<h2>Creating your own scripts that need internationalization</h2>
			<p>
				There are a lot of scripts in Puppy that use <inline-code>gettext</inline-code> for translating. For example, here are some in the woof-CE:
				<ul>
					<li>
						<a href="https://github.com/puppylinux-woof-CE/woof-CE/blob/testing/woof-code/rootfs-skeleton/usr/sbin/Pudd">Pudd</a>
					</li>
					<li>
						<a href="https://github.com/puppylinux-woof-CE/woof-CE/blob/testing/woof-code/rootfs-skeleton/usr/sbin/alsawizard">alsawizard</a>
					</li>
					<li>
						<a href="https://github.com/puppylinux-woof-CE/woof-CE/blob/testing/woof-code/rootfs-skeleton/usr/sbin/bcrypt_gui">bcrypt_gui</a>
					</li>
					<li>
						<a href="https://github.com/puppylinux-woof-CE/woof-CE/blob/testing/woof-code/rootfs-skeleton/usr/sbin/connectwizard">connectwizard</a>
					</li>
					<li>
						<a href="https://github.com/puppylinux-woof-CE/woof-CE/blob/testing/woof-code/rootfs-skeleton/usr/sbin/fontmanager">fontmanager</a>
					</li>
					<li>
						<a href="https://github.com/puppylinux-woof-CE/woof-CE/blob/testing/woof-code/rootfs-skeleton/usr/sbin/logout_gui">logout_gui</a>
					</li>
				</ul>

				Inside each script you will find a line like this:

				<code>export TEXTDOMAIN=myapp</code>

				MoManager finds all scripts with this entry, which confirms that it uses <inline-code>gettext</inline-code>, and offers a GUI interface for translating each script. You do not have to learn the commandline tools for translating, the GUI interface makes it easy.
			</p>
			<p>
				Basically, MoManager will create a <inline-code>.pot</inline-code> file for the application; for example if the app is named <inline-code>myapp</inline-code>, then the .pot file will be <inline-code>myapp.pot</inline-code>. Note that multiple scripts can have the same <b>domain-name</b> (<inline-code>TEXTDOMAIN</inline-code>) set as <inline-code>myapp</inline-code> (for example), and hence just one .pot file, named <inline-code>myapp.pot</inline-code>, will be created. So, if your application has several scripts, you don't have to have a .pot for each, if you want then you can use a single .pot as well (i.e. set the same domain-name) -- this is more efficient if there are common text strings to be translated in the scripts, and is easier to be translated as well.
			</p>
			<p>
				<b>NOTE:</b> Please place the <inline-code>export ...</inline-code> at column one, and do not place quotes around <inline-code>myapp</inline-code> (like <inline-code>"myapp"</inline-code> or <inline-code>'myapp'</inline-code>). The line in the script should look just like this:
				<code>export TEXTDOMAIN=myapp</code>
			</p>
			<p>
				<inline-code>.pot</inline-code> files are '<i>translation files</i>', for which you then have to insert the translations for a particular language. When that is done, it becomes a <inline-code>.po</inline-code> file, and then it is then compiled to a binary form and becomes a <inline-code>.mo</inline-code> file. The compiled .mo files are kept at <inline-code>/usr/share/locale</inline-code>. MoManager handles these conversions for you.
			</p>
			<section>
				<h3>Pre-existing .pot files</h3>
				<p>
					MoManager use command-line tool- <inline-code>xgettext</inline-code> to extract text strings from a script and create a .pot file from it. However this command-line tool may not always work properly. So, whenever MoManager finds an already created .pot for a program, at the location <inline-code>/usr/share/doc/nls/xxx/xxx.pot</inline-code>, it uses that .pot file instead.
				</p>
				<p>
					Note that MoManager only searches the directory <inline-code>/usr/share/doc/nls</inline-code> for any existing .pot file.
				</p>
			</section>
		</section>
		<section>
			<h2>Internationalizing Content using MoManager</h2>
			<p>
				MoManager is a GUI application written by Barry Kauler that makes it very easy for anyone to create non-English translations for applications in Puppy. All latest Puppies will have MoManager in them, which was firstly introduced to Puppy through '<i>Woof</i>' (later moved to <a href="https://github.com/puppylinux-woof-CE/woof-CE">woof-CE</a>) on '<i>February 14, 2012</i>'. If you want to use MoManager to create a '<i>langpack</i>' for a particular language it is recommended to use the very latest Puppy built from latest <a href="https://github.com/puppylinux-woof-CE/woof-CE">woof-CE</a>, which is not more than a month older. So, you may need to build your own Puppy for this process - the procedure can be found at <a href="https://github.com/puppylinux-woof-CE/woof-CE/wiki/Building-a-Puppy-on-GitHub">'Building a Puppy on GitHub' Github Wiki page</a>.
			</p>
			<p>
				MoManager is for creating and updating translation files for scripts, XML files, menu files, any other data text files, and binary executables.
			</p>
			<p>
				Scripts are applications that are executable text files, usually written in <inline-code>Bash</inline-code> or <inline-code>Ash</inline-code>, or interpreted programming languages like <inline-code>Perl</inline-code>, <inline-code>Python</inline-code>, <inline-code>Tcl</inline-code>, etc. (a more technical term for scripts would be - '<i>source files of interpreted languages</i>'). This section of the help file deals with 'creating langpacks for applications' only, and not about creating scripts themselves.
			</p>
			<p>
				You can find MoManager in <b>Utility</b> menu. Once started, you will see two columns of drop-down lists, one list is of files that already have a translation file for your language (on left side), the other list is for files that do not yet have a translation file. if you select a file from the formerlist, you may update the translation, and in the latter case you may create a new translation file.
			</p>
			<p>
				<div>Here is a snapshot of the main window, Puppy running with hi_IN locale:</div>
				<img alt="MoManager main window" src="./momanager_hi_IN.png">
			</p>
			<section>
				<h3>Updating an existing translation file</h3>
				<p><i>(Information on translation files can be found above.)</i></p>
				<p>
					In the case of updating an existing translation file, MoManager automatically synchronises with the latest script, and will identify any changed strings. Check if you see the text <inline-code>fuzzy</inline-code> anywhere in the translation file -- you can do something like this for the purpose:
					<code>cat path/to/translation_file.pot | grep "fuzzy"</code>
					If you see that the word <inline-code>fuzzy</inline-code> is found, it is likely that the original English text in the script has changed and you will need to update the translation.
				</p>
			</section>
			<section>
				<h3>Editing a translation file (Creating a translation)</h3>
				<p>
					Although it is probably possible to figure out how to edit a translation file, known as a <inline-code>po</inline-code> file in it's editable form, or <inline-code>mo</inline-code> file in it's compiled form, these links give some extra information on the topic:
					<ul>
						<li><a href="https://translate.sourceforge.net/wiki/guide/project/howto">translate.sourceforge.net/wiki/guide/project/howto</a></li>
						<li><a href="https://www.gnu.org/software/gettext/manual/html_node/gettext_9.html#PO-Files">gnu.org/software/gettext/manual/html_node/gettext_9.html#PO-Files</a></li>
					</ul>
					...note though, reading all of that can be confusing! It is possible to use MoManager without understanding all of those details. MoManager uses a normal text editor to edit <inline-code>.po</inline-code> files rather than a specialized po-editor (such as <inline-code>poedit</inline-code>) and this is quite easy to do, you just need a very basic understanding of the format of <inline-code>.po</inline-code> files.
				</p>
				<p>
					The very basic thing to understand to begin creating a translation for your language is the use of <inline-code>msgid</inline-code> and <inline-code>msgstr</inline-code> pair. When you select to edit/create a translation file using MoManager, it will open up the text editor for you with the translation file. The translation file will have few lines of this form:-
					<code>
						msgid "sometext"<br>
						msgstr "sometext"
					</code>
					<i>(Here <inline-code>msgstr</inline-code> can be empty if you are creating a new translation.)</i><br>
					<inline-code>msgid</inline-code> means the original English text, and <inline-code>msgstr</inline-code> means its translation in your selected language. So, you will only need to read <inline-code>msgid</inline-code> and put its translation in <inline-code>msgstr</inline-code>.
				</p>
			</section>
			<section>
				<h3>poedit</h3>
				<p>
					This is a special text editor for editing <inline-code>.po</inline-code> files. Although MoManager uses the <b>default text editor</b> (usually <inline-code>geany</inline-code> in most puppies), but if <inline-code>poedit</inline-code> is installed then MoManager can use it -- you will see a checkbox in the main window of MoManager to choose <inline-code>poedit</inline-code> over the default text editor.
				</p>
				<p>
					To install <inline-code>poedit</inline-code>, look in the Puppy Package Manager.
				</p>
			</section>
			<section>
				<h3>Langpack</h3>
				<p>
					You will also see in the MoManager window, a button to generate a <i>"langpack" PET package</i>. If you would like to translate Puppy for a particular language, this button is very nice. It will gather up all the translations you have created/modified for your language and will put them into a PET package, which you can then send to <b>BarryK</b>, through <a href="https://forum.puppylinux.com">PuppyLinux Forum</a>, and he may place it along with the other langpacks at ibiblio.org. See the existing langpacks at <a href="http://distro.ibiblio.org/puppylinux/pet_packages-noarch/">pet_packages-noarch</a> sub-directory of PuppyLinux directory under ibiblio.org. The langpacks will be named as <inline-code>langpack_*.pet</inline-code>.
				</p>
				<p>
					Note that the langpack is accumulative. Say for example that you install <inline-code>langpack_de-20120729.pet</inline-code> (German), you can then create some more translations, or update existing ones, then click the <inline-code>Create langpack PET</inline-code> button, and a new updated PET will be created. Please let us know if this mechanism leaves anything out!
				</p>
				<p>
					There are already maintainers for some languages. If you want to contribute to a translations for a specific language please do it through its maintainer. If there is no maintainer for the langauge you want to translate Puppy to, then you can directly contact <b>BarryK</b>. Note you can contact the maintainers through <a href="https://forum.puppylinux.com">PuppyLinux Forum</a>, and can even post your langpack at <a href="https://forum.puppylinux.com/viewforum.php?f=186">Internationalization sub-forum</a> in PuppyLinux forum.<br><br>
					At the time of writing, these are the maintainers:
				<table>
				  <tbody>
					<tr>
				  <td>da</td>
				  <td>Danish</td>
				  <td>maans</td>
				</tr>
				<tr>
					  <td>de
					  </td>
					  <td>German</td>
				<td>L18L
					  </td>
					</tr>
					<tr>
				  <td>el</td>
				  <td>Greek</td>
				  <td>kounelii</td>
				</tr>
				<tr>
					  <td>es
					  </td>
					  <td>Spanish</td>
				<td>vicmz
					  </td>
					</tr>
					<tr>
					  <td>fr
					  </td>
					  <td>French</td>
				<td>esmourguit
					  </td>
					</tr>
					<tr>
				  <td>it</td>
				  <td>Italian</td>
				  <td>vicmz (temporary)</td>
				</tr>
				<tr>
				  <td>nl</td>
				  <td>Dutch</td>
				  <td>Bert</td>
				</tr>
				<tr>
				  <td>pl</td>
				  <td>Polish</td>
				  <td>robwoj44</td>
				</tr>
				<tr>
				  <td>pt</td>
				  <td>Portuguese</td>
				  <td>vicmz</td>
				</tr>
				<tr>
					  <td>ru
					  </td>
					  <td>Russian</td>
				<td>rodin.s
					  </td>
					</tr>
				  </tbody>
				</table>
			</section>
			<section>
				<h3>Further information</h3>
				<p>
					For more news on MoManager, visit <a href="https://bkhome.org/news/">BarryK's News Site</a> and search for "MoManager" there.
				</p>
				<p>
					To interact with others working on translating Puppy, including asking questions about anything that puzzles you, please post your issue at <a href="https://forum.puppylinux.com/viewforum.php?f=186">Internationalization sub-forum</a> in PuppyLinux forum.
				</p>
			</section>
		</section>
		<footer>
			Regards,<br>
			woof-CE team
		</footer>
	</div>
</body>
</html>
